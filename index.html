<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

        <link rel="shortcut icon" href="favicon.ico" />
        <link rel="icon" type="image/x-icon" sizes="16x16 32x32" href="favicon.ico">


        <link rel="apple-touch-icon" sizes="any" href="apple-touch-icon.png">
        <link rel="icon" sizes="any" href="favicon-32.png" >

        <link rel="manifest" href="manifest.json">
        <link rel="icon" sizes="192x192" href="icon192.png">
            
                    
    <title>manifest-json</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        #main-content {
            flex: 1;
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-300">

    <div id="main-content" class="flex justify-between items-start p-5 bg-gray-200 shadow-md rounded">
        <div class="flex flex-col w-1/2 p-5">
            <div class="flex items-center mb-4">
                <a href="https://github.com/sudo-self" target="_blank" rel="noopener noreferrer">
                    <img src="https://api.iconify.design/akar-icons:github-fill.svg" alt="GitHub" class="w-8 h-8 mr-2">
                </a>
                <a href="https://x.com/ilostmyipad" target="_blank" rel="noopener noreferrer">
                    <img src="https://api.iconify.design/akar-icons:twitter-fill.svg" alt="Twitter" class="w-8 h-8 mr-2">
                </a>
                <a href="http://manifest.jessejesse.xyz" target="_blank" rel="noopener noreferrer" class="flex items-center text-blue-600 hover:underline">
                    <img src="https://api.iconify.design/bi-filetype-json.svg"
                    alt="json" class="w-8 h-8 mr-2">
                </a>
            </div>

            <h1 class="text-2xl font-bold mb-4">manifest.json</h1>

            <input type="text" id="short-name" placeholder="short name" class="border p-2 mb-2 w-full">
            <input type="text" id="name" placeholder="appplication name" class="border p-2 mb-2 w-full">
            <input type="text" id="start-url" placeholder="start url" class="border p-2 mb-2 w-full">
            <input type="text" id="icon1" placeholder="icon x192" class="border p-2 mb-2 w-full">
            <input type="text" id="icon2" placeholder="icon x512" class="border p-2 mb-2 w-full">
            <input type="text" id="theme-color" placeholder="color" class="border p-2 mb-2 w-full">
            <input type="text" id="background-color" placeholder="background" class="border p-2 mb-2 w-full">

            <button id="upload-btn" class="bg-blue-900 text-white py-2 rounded hover:bg-rose-900 mt-4">
                Upload
            </button>
            <div id="upload-status" class="mt-4 text-red-800"></div>

            <button id="download-btn" class="bg-green-800 text-white py-2 rounded hover:bg-green-800 mt-4">
                Download
            </button>

            <div class="mt-4">
                <code id="bubblewrap-command" class="bg-gray-300 p-2 rounded">
                    bubblewrap init --manifest <span id="uploaded-url"></span>
                </code>
            </div>
        </div>
        <div class="w-1/2 p-5 bg-gray-900 text-white rounded overflow-auto">
            <h2 class="text-xl text-green-400 mb-2">:json@localhost:</h2>
            <pre id="terminal-output"></pre>
        </div>
    </div>
    <footer class="bg-gray-900 text-gray-100 text-center p-4">
        @iLostmyipad
    </footer>
   <script>
        const apiUrl = 'https://server.jessejesse.workers.dev';
        const apiKey = 'ce2AoaisOsdq6D0xRnRMLfS5VKuQYXuD-x_xXga1';

        const updateTerminalOutput = () => {
            const shortName = document.getElementById('short-name').value;
            const name = document.getElementById('name').value;
            const startUrl = document.getElementById('start-url').value;
            const icon1 = document.getElementById('icon1').value;
            const icon2 = document.getElementById('icon2').value;
            const themeColor = document.getElementById('theme-color').value;
            const backgroundColor = document.getElementById('background-color').value;

            const manifestData = {
                short_name: shortName,
                name,
                start_url: startUrl,
                icons: [
                    {
                        src: icon1,
                        type: "image/png",
                        sizes: "192x192",
                        purpose: "any maskable"
                    },
                    {
                        src: icon2,
                        type: "image/png",
                        sizes: "512x512",
                        purpose: "any maskable"
                    }
                ],
                theme_color: themeColor,
                background_color: backgroundColor
            };

            document.getElementById('terminal-output').textContent = JSON.stringify(manifestData, null, 2);
        };

        document.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('input', updateTerminalOutput);
        });

        document.getElementById('upload-btn').addEventListener('click', async () => {
            const uniqueID = Date.now();
            const manifestFileName = `manifest-${uniqueID}.json`;

            const data = {
                short_name: document.getElementById('short-name').value,
                name: document.getElementById('name').value,
                start_url: document.getElementById('start-url').value,
                icons: [
                    {
                        src: document.getElementById('icon1').value,
                        type: "image/png",
                        sizes: "192x192",
                        purpose: "any maskable"
                    },
                    {
                        src: document.getElementById('icon2').value,
                        type: "image/png",
                        sizes: "512x512",
                        purpose: "any maskable"
                    }
                ],
                theme_color: document.getElementById('theme-color').value,
                background_color: document.getElementById('background-color').value
            };

            try {
                const response = await fetch(`${apiUrl}/upload`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({ manifest: data, name: manifestFileName })
                });

                if (response.ok) {
                    document.getElementById('upload-status').textContent = 'Uploaded Successfully!';
                    document.getElementById('uploaded-url').textContent = `${apiUrl}/manifests/${manifestFileName}`;
                } else {
                    throw new Error('Upload failed!');
                }
            } catch (error) {
                document.getElementById('upload-status').textContent = error.message;
            }
        });

        document.getElementById('download-btn').addEventListener('click', () => {
            const dataStr = document.getElementById('terminal-output').textContent;
            const blob = new Blob([dataStr], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'manifest.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });

        updateTerminalOutput();
    </script>
</body>
</html>














